<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Config {{ titulo }}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="container py-4">

<h3 class="mb-3">{{ titulo }}</h3>
<a href="{{ url_for('index') }}" class="btn btn-primary">&larr;Início</a>

{% with messages = get_flashed_messages() %}
{% if messages %}
<div class="alert alert-info">
  <ul class="mb-0">{% for m in messages %}<li>{{ m }}</li>{% endfor %}</ul>
</div>
{% endif %}
{% endwith %}

<section class="mb-4 pt-3">
  <h4>Nova categoria</h4>
  <form action="{{ url_for('categoria_criar') }}" method="post" class="row g-3">
    <div class="col-auto">
      <input type="text" name="nome" class="form-control" placeholder="Nome" required>
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Cadastrar</button>
    </div>
  </form>
</section>

{% if categoria_editar %}
<section class="mb-4 border rounded p-3 bg-warning-subtle">
  <h4>Editar categoria #{{ categoria_editar.id_categoria }}</h4>
  <form action="{{ url_for('categoria_editar', id_categoria=categoria_editar.id_categoria) }}" method="post" class="row g-3">
    <div class="col-auto">
      <input type="text" name="nome" value="{{ categoria_editar.nome }}" class="form-control" required>
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-success">Salvar</button>
      <a class="btn btn-secondary" href="{{ url_for('categoria_list') }}">Cancelar</a>
    </div>
  </form>
</section>
{% endif %}

{% if categoria_deletar %}
<section class="mb-4 border rounded p-3 bg-danger-subtle">
  <h4>Confirmar exclusão da categoria "{{ categoria_deletar.nome }}"?</h4>
  <form action="{{ url_for('categoria_deletar', id_categoria=categoria_deletar.id_categoria) }}" method="post" class="d-flex gap-2">
    <button type="submit" class="btn btn-danger">Sim, excluir</button>
    <a class="btn btn-secondary" href="{{ url_for('categoria_list') }}">Cancelar</a>
  </form>
</section>
{% endif %}

<h4>Lista de categorias</h4>
<div class="table-responsive">
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr><th>ID</th><th>Nome</th><th>Ações</th></tr>
    </thead>
    <tbody>
      {% for c in categorias %}
      <tr>
        <td>{{ c.id_categoria }}</td>
        <td>{{ c.nome }}</td>
        <td>
          <a href="{{ url_for('categoria_list', edit_id=c.id_categoria) }}" class="btn btn-sm btn-warning">Editar</a>
          <a href="{{ url_for('categoria_list', confirm_delete_id=c.id_categoria) }}" class="btn btn-sm btn-danger">Excluir</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
